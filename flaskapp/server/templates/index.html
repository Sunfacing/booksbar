<!DOCTYPE html>
  <html lang="en">
    <head>
      <title>Booksbar</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="icon" href="https://cdn-user-icons.flaticon.com/20104/20104134/1637199578250.svg?token=exp=1637200479~hmac=6e4b81543244a4dac2e6e6e987fac033">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    </head>
    <body>
      <nav class="navbar" style="background-color: #393d3f;">
        <a class="navbar-brand" style="color: #ffffff;" href="{{ url_for('index')}}"><img src='https://dewey.tailorbrands.com/production/brand_version_mockup_image/380/6391619380_b1cf68eb-1598-4eb2-987f-bd1ab6196133.png?cb=1637199110' style="width: 60%;"></a>
        <a href="{{ url_for('member') }}" ><i class="fas fa-user-circle fa-2x" style="color: #ffffff"></i></a>
    </nav>
      <main>
          <div id="loading" style="margin: auto;"></div>
          <div id="content">
          <div class="jumbotron " style="height: 65vh; background: url('https://d3bu8utwyaxpsl.cloudfront.net/bookbar.jpg') no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;">
            <div class="mx-auto" style="width:80%; position:absolute; top: 32%; left:10%" >
              
              <form class="form-inline p-3" action="/product" >
                <input id="question" class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" name="search" required />
                <button class="btn my-2 my-sm-0" type="submit" onclick="loading(); " style="background-color:#393d3f; border-color: #393d3f; color:#ffffff ; font-weight:bold">搜尋書名</button>
              </form>

              <form class="form-inline p-3">
                <a class="btn my-2 my-sm-0" href="/文學?category=現代華文創作" role="button" style="background-color:#393d3f; border-color: #393d3f; color:#ffffff ;font-weight:bold">查看全部分類</a>
              </form>
              <br><br>
              <p class="text-xl-right" style="color: #ffffff; font-weight: bold; font-size:large;">你可能不知道自己要的是什麼，但是，要先知道自己，不要什麼。<br>                                  –《走在夢想的路上》．謝哲青</p>
            </div>
          </div>
        
        <div class="btn-group justify-content-end" role="group" aria-label="Basic example" style="width: 90%;">
          {% if period == 'month' %}
            <a class="btn btn-dark my-2 my-sm-0" href="/?period=month" role="button" onclick="loading2();" style="background-color:#cc444b; border-color: #cc444b; font-weight:bold; border-radius: 7px;">近一個月出版</a>
          {% else %}
            <a class="btn btn-dark my-2 my-sm-0" href="/?period=month" role="button" onclick="loading2();" style="background-color:#393d3f; border-color: #393d3f; font-weight:bold; border-radius: 7px;">近一個月出版</a>
          {% endif %}
          <div style="color:white"> | </div>
          {% if period == 'new' %}
            <a class="btn btn-dark my-2 my-sm-0" href="/?period=new" role="button"  onclick="loading2();" style="background-color:#cc444b; border-color: #cc444b; font-weight:bold; border-radius: 7px;">即將出版</a>
          {% else %}
          <a class="btn btn-dark my-2 my-sm-0" href="/?period=new" role="button"  onclick="loading2();" style="background-color:#393d3f; border-color: #393d3f; font-weight:bold; border-radius: 7px;">即將出版</a>
          {% endif %}
        </div>
        <div id="loading2" style="margin: auto;"></div>
        <div id="content2">
        {% for subset in collections %}
          <div class="container p-3" style="width: 70%;">
            <div class="row justify-content-center">
              {% for book in subset %}
              <div class="card" style="width: 15rem; height:70%; border:0px; border-radius: 7px; margin: 10px;">
                <a href="product/{{ book['isbn_id'] }}" alt='' style="color: #393d3f; text-decoration:none">
                  
                  <div class="mx-auto d-block" style="vertical-align: middle; height: 240px;">
                    <img class="card-img-top p-3" src="{{ book['cover_photo']}}" alt="cover_photo" onerror="this.onerror=null; this.src='https://dewey.tailorbrands.com/production/brand_version_mockup_image/331/6386236331_d0f703de-22e1-44c0-89e4-d49fc78d8899.png?cb=1637118063';">
                  </div>
                  
                  <div class="card-body" style="height:8rem; width:20em">
                    {% if book['title'].split('：')[0]| length <= 10 %}
                      <h5 class="card-title" style="font-weight: bold">{{ book['title'].split('：')[0][:10] }}</h5>
                    {% else %}
                      <h5 class="card-title" style="font-weight: bold">{{ book['title'].split('：')[0].split('（')[0][:10] }}</h5>
                    {% endif %}
                    <p>作者: {{ book['author'][:10]}}</br>
                    出版日: {{ book['publish_date'].strftime("%Y-%m-%d")}}</p>                    
                  </div>
                </a>
                </div>
              {% endfor %} 
              </div> 
          </div> 
        {% endfor %} 
        </div>
      </div>
      </main>
      
      <style>
        .card {
          box-shadow: 0 8px 16px 0 rgba(133, 104, 104, 0.2);
        }
      </style>

      <script type="text/javascript">
        function loading(){
          if(document.getElementById("question").value.length == 0)
                    {
                      // do nothing
                    } else {
                      $("#loading").show();
                      $("#content").hide();
                  }       
                }
      </script>
      <style>
        div#loading {
            width: 700px;
            height: 600px;
            display: none;
            background: url(/static/loadingimage.gif) no-repeat;
            cursor: wait;
            }
      </style> 
      <script type="text/javascript">
        function loading2(){
            $("#loading2").show();
            $("#content2").hide();       
        }
      </script>
      <style>
        div#loading2 {
            width: 700px;
            height: 600px;
            display: none;
            background: url(/static/loadingimage.gif) no-repeat;
            cursor: wait;
            }
      </style>  
      <style>
        .card:hover {
            transform: scale(1.05);
          }

      </style>     

    </body>
  </html>